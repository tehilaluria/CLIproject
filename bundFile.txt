// Author: TehilaLuria

// Start of file: .NETCoreApp,Version=v6.0.AssemblyAttributes.cs

// Relative path: CLIproject\obj\Debug\net6.0\.NETCoreApp,Version=v6.0.AssemblyAttributes.cs

// <autogenerated />
using System;
using System.Reflection;
[assembly: global::System.Runtime.Versioning.TargetFrameworkAttribute(".NETCoreApp,Version=v6.0", FrameworkDisplayName = ".NET 6.0")]

// End of file: .NETCoreApp,Version=v6.0.AssemblyAttributes.cs

// Start of file: .NETCoreApp,Version=v6.0.AssemblyAttributes.cs

// Relative path: CLIproject\obj\Release\net6.0\.NETCoreApp,Version=v6.0.AssemblyAttributes.cs

// <autogenerated />
using System;
using System.Reflection;
[assembly: global::System.Runtime.Versioning.TargetFrameworkAttribute(".NETCoreApp,Version=v6.0", FrameworkDisplayName = ".NET 6.0")]

// End of file: .NETCoreApp,Version=v6.0.AssemblyAttributes.cs

// Start of file: bundleFile.txt

// Relative path: bundleFile.txt

// Start of file: .NETCoreApp,Version=v6.0.AssemblyAttributes.cs
// <autogenerated />
using System;
using System.Reflection;
[assembly: global::System.Runtime.Versioning.TargetFrameworkAttribute(".NETCoreApp,Version=v6.0", FrameworkDisplayName = ".NET 6.0")]
// End of file: .NETCoreApp,Version=v6.0.AssemblyAttributes.cs
// Start of file: .NETCoreApp,Version=v6.0.AssemblyAttributes.cs
// <autogenerated />
using System;
using System.Reflection;
[assembly: global::System.Runtime.Versioning.TargetFrameworkAttribute(".NETCoreApp,Version=v6.0", FrameworkDisplayName = ".NET 6.0")]
// End of file: .NETCoreApp,Version=v6.0.AssemblyAttributes.cs
// Start of file: CLIproject.AssemblyInfo.cs
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.42000
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------
using System;
using System.Reflection;
[assembly: System.Reflection.AssemblyCompanyAttribute("CLIproject")]
[assembly: System.Reflection.AssemblyConfigurationAttribute("Debug")]
[assembly: System.Reflection.AssemblyFileVersionAttribute("1.0.0.0")]
[assembly: System.Reflection.AssemblyInformationalVersionAttribute("1.0.0")]
[assembly: System.Reflection.AssemblyProductAttribute("CLIproject")]
[assembly: System.Reflection.AssemblyTitleAttribute("CLIproject")]
[assembly: System.Reflection.AssemblyVersionAttribute("1.0.0.0")]
// Generated by the MSBuild WriteCodeFragment class.
// End of file: CLIproject.AssemblyInfo.cs
// Start of file: CLIproject.GlobalUsings.g.cs
// <auto-generated/>
global using global::System;
global using global::System.Collections.Generic;
global using global::System.IO;
global using global::System.Linq;
global using global::System.Net.Http;
global using global::System.Threading;
global using global::System.Threading.Tasks;
// End of file: CLIproject.GlobalUsings.g.cs
// Start of file: fib.AssemblyInfo.cs
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------
using System;
using System.Reflection;
[assembly: System.Reflection.AssemblyCompanyAttribute("fib")]
[assembly: System.Reflection.AssemblyConfigurationAttribute("Debug")]
[assembly: System.Reflection.AssemblyFileVersionAttribute("1.0.0.0")]
[assembly: System.Reflection.AssemblyInformationalVersionAttribute("1.0.0+ebf2e9f04b22ce01905da91095187b5e36a2beb1")]
[assembly: System.Reflection.AssemblyProductAttribute("fib")]
[assembly: System.Reflection.AssemblyTitleAttribute("fib")]
[assembly: System.Reflection.AssemblyVersionAttribute("1.0.0.0")]
// Generated by the MSBuild WriteCodeFragment class.
// End of file: fib.AssemblyInfo.cs
// Start of file: fib.AssemblyInfo.cs
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.42000
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------
using System;
using System.Reflection;
[assembly: System.Reflection.AssemblyCompanyAttribute("fib")]
[assembly: System.Reflection.AssemblyConfigurationAttribute("Release")]
[assembly: System.Reflection.AssemblyFileVersionAttribute("1.0.0.0")]
[assembly: System.Reflection.AssemblyInformationalVersionAttribute("1.0.0")]
[assembly: System.Reflection.AssemblyProductAttribute("fib")]
[assembly: System.Reflection.AssemblyTitleAttribute("fib")]
[assembly: System.Reflection.AssemblyVersionAttribute("1.0.0.0")]
// Generated by the MSBuild WriteCodeFragment class.
// End of file: fib.AssemblyInfo.cs
// Start of file: fib.GlobalUsings.g.cs
// <auto-generated/>
global using global::System;
global using global::System.Collections.Generic;
global using global::System.IO;
global using global::System.Linq;
global using global::System.Net.Http;
global using global::System.Threading;
global using global::System.Threading.Tasks;
// End of file: fib.GlobalUsings.g.cs
// Start of file: fib.GlobalUsings.g.cs
// <auto-generated/>
global using global::System;
global using global::System.Collections.Generic;
global using global::System.IO;
global using global::System.Linq;
global using global::System.Net.Http;
global using global::System.Threading;
global using global::System.Threading.Tasks;
// End of file: fib.GlobalUsings.g.cs
// Start of file: Program.cs
using System.CommandLine;
using System.IO;
using System.Linq;
using System.Text;
// הגדרת תיקיות שיש לדלג עליהן
var excludedDirectories = new[] { "bin", "debug", "obj" };
// הגדרת אפשרויות
var outputOption = new Option<FileInfo>("--output", "File path and name") { IsRequired = true };
outputOption.AddAlias("-o");
var languageOption = new Option<string>("--language", "List of programming languages (e.g., C#, Java, Python, etc.)") { IsRequired = true };
languageOption.AddAlias("-l");
var noteOption = new Option<bool>("--note", "Add source file information as comments.");
noteOption.AddAlias("-n");
var sortOption = new Option<string>("--sort", () => "name", "Sort by file name or type.");
sortOption.AddAlias("-s");
var removeEmptyLinesOption = new Option<bool>("--remove-empty-lines", "Remove empty lines.");
removeEmptyLinesOption.AddAlias("-r");
var authorOption = new Option<string>("--author", "Author name to add as a comment.");
authorOption.AddAlias("-a");
// הגדרת פקודה
var bundleCommand = new Command("bundle", "Bundle code files to a single file.")
{
    outputOption,
    languageOption,
    noteOption,
    sortOption,
    removeEmptyLinesOption,
    authorOption
};
// מימוש הלוגיקה של עיבוד הפקודה
bundleCommand.SetHandler<FileInfo, string, bool, string, bool, string>(
    (output, language, note, sort, removeEmptyLines, author) =>
    {
        try
        {
            // רשימת שפות נתמכות
            var supportedLanguages = new[] { "cs", "c", "cpp", "js", "jsx", "py", "java", "txt" };
            // פענוח שפות מהאפשרות
            var selectedLanguages = language.Equals("all", StringComparison.OrdinalIgnoreCase)
                ? supportedLanguages
                : language.Split(',', StringSplitOptions.RemoveEmptyEntries)
                          .Select(lang => lang.Trim().ToLower())
                          .Where(lang => supportedLanguages.Contains(lang))
                          .ToArray();
            if (!selectedLanguages.Any())
            {
                Console.WriteLine("No valid languages selected. Supported languages are: " + string.Join(", ", supportedLanguages));
                return;
            }
            // איתור כל הקבצים בתיקייה הנוכחית שעונים לקריטריונים
            var files = Directory.GetFiles(Directory.GetCurrentDirectory(), "*.*", SearchOption.AllDirectories)
                .Where(file =>
                {
                    var relativePath = Path.GetRelativePath(Directory.GetCurrentDirectory(), file);
                    var directoryName = Path.GetDirectoryName(relativePath)?.Split(Path.DirectorySeparatorChar).FirstOrDefault();
                    return selectedLanguages.Contains(Path.GetExtension(file).TrimStart('.').ToLower()) &&
                           !excludedDirectories.Contains(directoryName?.ToLower());
                })
                .ToList();
            if (!files.Any())
            {
                Console.WriteLine("No files found matching the selected languages and criteria.");
                return;
            }
            // מיון קבצים
            files = sort switch
            {
                "name" => files.OrderBy(Path.GetFileName).ToList(),
                "type" => files.OrderBy(Path.GetExtension).ThenBy(Path.GetFileName).ToList(),
                _ => files
            };
            // יצירת קובץ הפלט ואיחוד הקבצים לתוכו
            using var writer = new StreamWriter(output.FullName, false, Encoding.UTF8);
            if (!string.IsNullOrWhiteSpace(author))
            {
                writer.WriteLine($"// Author: {author}");
                writer.WriteLine();
            }
            foreach (var file in files)
            {
                var fileName = Path.GetFileName(file);
                // הוספת הערה עם שם הקובץ לפני התוכן
                writer.WriteLine($"// Start of file: {fileName}");
                writer.WriteLine();
                if (note)
                {
                    var relativePath = Path.GetRelativePath(Directory.GetCurrentDirectory(), file);
                    writer.WriteLine($"// Relative path: {relativePath}");
                    writer.WriteLine();
                }
                var lines = File.ReadAllLines(file);
                if (removeEmptyLines)
                {
                    lines = lines.Where(line => !string.IsNullOrWhiteSpace(line)).ToArray();
                }
                foreach (var line in lines)
                {
                    writer.WriteLine(line);
                }
                // הוספת הערה עם שם הקובץ אחרי התוכן
                writer.WriteLine();
                writer.WriteLine($"// End of file: {fileName}");
                writer.WriteLine(); // הוספת שורה ריקה בין קבצים
            }
            Console.WriteLine($"Bundle created successfully at {output.FullName}");
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error: {ex.Message}");
        }
    },
    outputOption, languageOption, noteOption, sortOption, removeEmptyLinesOption, authorOption
);
var createRspCommand = new Command("create-rsp", "Create a response file for the bundle command.");
createRspCommand.SetHandler(() =>
{
    try {
        Console.Write("Enter output file path and name (e.g., output.txt): ");
        var output = Console.ReadLine() ?? string.Empty;
        Console.Write("Enter programming languages (comma-separated, or 'all'): ");
        var languages = Console.ReadLine() ?? string.Empty;
        Console.Write("Include source file information as comments? (yes/no): ");
        var includeNotes = Console.ReadLine()?.Trim().ToLower() == "yes";
        Console.Write("Sort files by 'name' or 'type' (default: name): ");
        var sort = Console.ReadLine();
        if (string.IsNullOrWhiteSpace(sort)) sort = "name";
        Console.Write("Remove empty lines? (yes/no): ");
        var removeEmptyLines = Console.ReadLine()?.Trim().ToLower() == "yes";
        Console.Write("Enter author name (optional): ");
        var author = Console.ReadLine();
        // יצירת תוכן קובץ התגובה
        var responseFileContent = new StringBuilder();
        responseFileContent.AppendLine($"--output {output}");
        responseFileContent.AppendLine($"--language {languages}");
        if (includeNotes) responseFileContent.AppendLine("--note");
        responseFileContent.AppendLine($"--sort {sort}");
        if (removeEmptyLines) responseFileContent.AppendLine("--remove-empty-lines");
        if (!string.IsNullOrWhiteSpace(author)) responseFileContent.AppendLine($"--author \"{author}\"");
        // שמירת קובץ התגובה
        var responseFileName = "bundle.rsp";
        File.WriteAllText(responseFileName, responseFileContent.ToString());
        Console.WriteLine($"Response file created: {responseFileName}");
        Console.WriteLine($"To use it, run: fib bundle @bundle.rsp");
    }
    catch (Exception ex)
    {
        Console.WriteLine($"Error: {ex.Message}");
    }
});
// הגדרת RootCommand
var rootCommand = new RootCommand("Root command for File Bundler CLI");
rootCommand.AddCommand(bundleCommand);
rootCommand.AddCommand(createRspCommand);
// הפעלת RootCommand
await rootCommand.InvokeAsync(args);
// End of file: Program.cs

// End of file: bundleFile.txt

// Start of file: CLIproject.AssemblyInfo.cs

// Relative path: CLIproject\obj\Debug\net6.0\CLIproject.AssemblyInfo.cs

//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.42000
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------
using System;
using System.Reflection;
[assembly: System.Reflection.AssemblyCompanyAttribute("CLIproject")]
[assembly: System.Reflection.AssemblyConfigurationAttribute("Debug")]
[assembly: System.Reflection.AssemblyFileVersionAttribute("1.0.0.0")]
[assembly: System.Reflection.AssemblyInformationalVersionAttribute("1.0.0")]
[assembly: System.Reflection.AssemblyProductAttribute("CLIproject")]
[assembly: System.Reflection.AssemblyTitleAttribute("CLIproject")]
[assembly: System.Reflection.AssemblyVersionAttribute("1.0.0.0")]
// Generated by the MSBuild WriteCodeFragment class.

// End of file: CLIproject.AssemblyInfo.cs

// Start of file: CLIproject.GlobalUsings.g.cs

// Relative path: CLIproject\obj\Debug\net6.0\CLIproject.GlobalUsings.g.cs

// <auto-generated/>
global using global::System;
global using global::System.Collections.Generic;
global using global::System.IO;
global using global::System.Linq;
global using global::System.Net.Http;
global using global::System.Threading;
global using global::System.Threading.Tasks;

// End of file: CLIproject.GlobalUsings.g.cs

// Start of file: fib.AssemblyInfo.cs

// Relative path: CLIproject\obj\Debug\net6.0\fib.AssemblyInfo.cs

//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------
using System;
using System.Reflection;
[assembly: System.Reflection.AssemblyCompanyAttribute("fib")]
[assembly: System.Reflection.AssemblyConfigurationAttribute("Debug")]
[assembly: System.Reflection.AssemblyFileVersionAttribute("1.0.0.0")]
[assembly: System.Reflection.AssemblyInformationalVersionAttribute("1.0.0+ebf2e9f04b22ce01905da91095187b5e36a2beb1")]
[assembly: System.Reflection.AssemblyProductAttribute("fib")]
[assembly: System.Reflection.AssemblyTitleAttribute("fib")]
[assembly: System.Reflection.AssemblyVersionAttribute("1.0.0.0")]
// Generated by the MSBuild WriteCodeFragment class.

// End of file: fib.AssemblyInfo.cs

// Start of file: fib.AssemblyInfo.cs

// Relative path: CLIproject\obj\Release\net6.0\fib.AssemblyInfo.cs

//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.42000
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------
using System;
using System.Reflection;
[assembly: System.Reflection.AssemblyCompanyAttribute("fib")]
[assembly: System.Reflection.AssemblyConfigurationAttribute("Release")]
[assembly: System.Reflection.AssemblyFileVersionAttribute("1.0.0.0")]
[assembly: System.Reflection.AssemblyInformationalVersionAttribute("1.0.0")]
[assembly: System.Reflection.AssemblyProductAttribute("fib")]
[assembly: System.Reflection.AssemblyTitleAttribute("fib")]
[assembly: System.Reflection.AssemblyVersionAttribute("1.0.0.0")]
// Generated by the MSBuild WriteCodeFragment class.

// End of file: fib.AssemblyInfo.cs

// Start of file: fib.csproj.FileListAbsolute.txt

// Relative path: CLIproject\obj\Debug\net6.0\fib.csproj.FileListAbsolute.txt

C:\Users\user1\Desktop\פרקטיקוד\CLIproject\CLIproject\bin\Debug\net6.0\fib.exe
C:\Users\user1\Desktop\פרקטיקוד\CLIproject\CLIproject\bin\Debug\net6.0\fib.deps.json
C:\Users\user1\Desktop\פרקטיקוד\CLIproject\CLIproject\bin\Debug\net6.0\fib.runtimeconfig.json
C:\Users\user1\Desktop\פרקטיקוד\CLIproject\CLIproject\bin\Debug\net6.0\fib.dll
C:\Users\user1\Desktop\פרקטיקוד\CLIproject\CLIproject\bin\Debug\net6.0\fib.pdb
C:\Users\user1\Desktop\פרקטיקוד\CLIproject\CLIproject\bin\Debug\net6.0\System.CommandLine.dll
C:\Users\user1\Desktop\פרקטיקוד\CLIproject\CLIproject\bin\Debug\net6.0\cs\System.CommandLine.resources.dll
C:\Users\user1\Desktop\פרקטיקוד\CLIproject\CLIproject\bin\Debug\net6.0\de\System.CommandLine.resources.dll
C:\Users\user1\Desktop\פרקטיקוד\CLIproject\CLIproject\bin\Debug\net6.0\es\System.CommandLine.resources.dll
C:\Users\user1\Desktop\פרקטיקוד\CLIproject\CLIproject\bin\Debug\net6.0\fr\System.CommandLine.resources.dll
C:\Users\user1\Desktop\פרקטיקוד\CLIproject\CLIproject\bin\Debug\net6.0\it\System.CommandLine.resources.dll
C:\Users\user1\Desktop\פרקטיקוד\CLIproject\CLIproject\bin\Debug\net6.0\ja\System.CommandLine.resources.dll
C:\Users\user1\Desktop\פרקטיקוד\CLIproject\CLIproject\bin\Debug\net6.0\ko\System.CommandLine.resources.dll
C:\Users\user1\Desktop\פרקטיקוד\CLIproject\CLIproject\bin\Debug\net6.0\pl\System.CommandLine.resources.dll
C:\Users\user1\Desktop\פרקטיקוד\CLIproject\CLIproject\bin\Debug\net6.0\pt-BR\System.CommandLine.resources.dll
C:\Users\user1\Desktop\פרקטיקוד\CLIproject\CLIproject\bin\Debug\net6.0\ru\System.CommandLine.resources.dll
C:\Users\user1\Desktop\פרקטיקוד\CLIproject\CLIproject\bin\Debug\net6.0\tr\System.CommandLine.resources.dll
C:\Users\user1\Desktop\פרקטיקוד\CLIproject\CLIproject\bin\Debug\net6.0\zh-Hans\System.CommandLine.resources.dll
C:\Users\user1\Desktop\פרקטיקוד\CLIproject\CLIproject\bin\Debug\net6.0\zh-Hant\System.CommandLine.resources.dll
C:\Users\user1\Desktop\פרקטיקוד\CLIproject\CLIproject\obj\Debug\net6.0\fib.csproj.AssemblyReference.cache
C:\Users\user1\Desktop\פרקטיקוד\CLIproject\CLIproject\obj\Debug\net6.0\fib.GeneratedMSBuildEditorConfig.editorconfig
C:\Users\user1\Desktop\פרקטיקוד\CLIproject\CLIproject\obj\Debug\net6.0\fib.AssemblyInfoInputs.cache
C:\Users\user1\Desktop\פרקטיקוד\CLIproject\CLIproject\obj\Debug\net6.0\fib.AssemblyInfo.cs
C:\Users\user1\Desktop\פרקטיקוד\CLIproject\CLIproject\obj\Debug\net6.0\fib.csproj.CoreCompileInputs.cache
C:\Users\user1\Desktop\פרקטיקוד\CLIproject\CLIproject\obj\Debug\net6.0\fib.csproj.CopyComplete
C:\Users\user1\Desktop\פרקטיקוד\CLIproject\CLIproject\obj\Debug\net6.0\fib.dll
C:\Users\user1\Desktop\פרקטיקוד\CLIproject\CLIproject\obj\Debug\net6.0\refint\fib.dll
C:\Users\user1\Desktop\פרקטיקוד\CLIproject\CLIproject\obj\Debug\net6.0\fib.pdb
C:\Users\user1\Desktop\פרקטיקוד\CLIproject\CLIproject\obj\Debug\net6.0\fib.genruntimeconfig.cache
C:\Users\user1\Desktop\פרקטיקוד\CLIproject\CLIproject\obj\Debug\net6.0\ref\fib.dll
C:\Users\user1\Desktop\practicode\CLIproject\CLIproject\bin\Debug\net6.0\fib.exe
C:\Users\user1\Desktop\practicode\CLIproject\CLIproject\bin\Debug\net6.0\fib.deps.json
C:\Users\user1\Desktop\practicode\CLIproject\CLIproject\bin\Debug\net6.0\fib.runtimeconfig.json
C:\Users\user1\Desktop\practicode\CLIproject\CLIproject\bin\Debug\net6.0\fib.dll
C:\Users\user1\Desktop\practicode\CLIproject\CLIproject\bin\Debug\net6.0\fib.pdb
C:\Users\user1\Desktop\practicode\CLIproject\CLIproject\bin\Debug\net6.0\System.CommandLine.dll
C:\Users\user1\Desktop\practicode\CLIproject\CLIproject\bin\Debug\net6.0\cs\System.CommandLine.resources.dll
C:\Users\user1\Desktop\practicode\CLIproject\CLIproject\bin\Debug\net6.0\de\System.CommandLine.resources.dll
C:\Users\user1\Desktop\practicode\CLIproject\CLIproject\bin\Debug\net6.0\es\System.CommandLine.resources.dll
C:\Users\user1\Desktop\practicode\CLIproject\CLIproject\bin\Debug\net6.0\fr\System.CommandLine.resources.dll
C:\Users\user1\Desktop\practicode\CLIproject\CLIproject\bin\Debug\net6.0\it\System.CommandLine.resources.dll
C:\Users\user1\Desktop\practicode\CLIproject\CLIproject\bin\Debug\net6.0\ja\System.CommandLine.resources.dll
C:\Users\user1\Desktop\practicode\CLIproject\CLIproject\bin\Debug\net6.0\ko\System.CommandLine.resources.dll
C:\Users\user1\Desktop\practicode\CLIproject\CLIproject\bin\Debug\net6.0\pl\System.CommandLine.resources.dll
C:\Users\user1\Desktop\practicode\CLIproject\CLIproject\bin\Debug\net6.0\pt-BR\System.CommandLine.resources.dll
C:\Users\user1\Desktop\practicode\CLIproject\CLIproject\bin\Debug\net6.0\ru\System.CommandLine.resources.dll
C:\Users\user1\Desktop\practicode\CLIproject\CLIproject\bin\Debug\net6.0\tr\System.CommandLine.resources.dll
C:\Users\user1\Desktop\practicode\CLIproject\CLIproject\bin\Debug\net6.0\zh-Hans\System.CommandLine.resources.dll
C:\Users\user1\Desktop\practicode\CLIproject\CLIproject\bin\Debug\net6.0\zh-Hant\System.CommandLine.resources.dll
C:\Users\user1\Desktop\practicode\CLIproject\CLIproject\obj\Debug\net6.0\fib.csproj.AssemblyReference.cache
C:\Users\user1\Desktop\practicode\CLIproject\CLIproject\obj\Debug\net6.0\fib.GeneratedMSBuildEditorConfig.editorconfig
C:\Users\user1\Desktop\practicode\CLIproject\CLIproject\obj\Debug\net6.0\fib.AssemblyInfoInputs.cache
C:\Users\user1\Desktop\practicode\CLIproject\CLIproject\obj\Debug\net6.0\fib.AssemblyInfo.cs
C:\Users\user1\Desktop\practicode\CLIproject\CLIproject\obj\Debug\net6.0\fib.csproj.CoreCompileInputs.cache
C:\Users\user1\Desktop\practicode\CLIproject\CLIproject\obj\Debug\net6.0\fib.csproj.CopyComplete
C:\Users\user1\Desktop\practicode\CLIproject\CLIproject\obj\Debug\net6.0\fib.dll
C:\Users\user1\Desktop\practicode\CLIproject\CLIproject\obj\Debug\net6.0\refint\fib.dll
C:\Users\user1\Desktop\practicode\CLIproject\CLIproject\obj\Debug\net6.0\fib.pdb
C:\Users\user1\Desktop\practicode\CLIproject\CLIproject\obj\Debug\net6.0\fib.genruntimeconfig.cache
C:\Users\user1\Desktop\practicode\CLIproject\CLIproject\obj\Debug\net6.0\ref\fib.dll
C:\Users\This User\Desktop\School Tehila\הנדסאים -מסלול\שנה ג\תרגול לשיפשוף\CliProject\CLIproject\bin\Debug\net6.0\fib.exe
C:\Users\This User\Desktop\School Tehila\הנדסאים -מסלול\שנה ג\תרגול לשיפשוף\CliProject\CLIproject\bin\Debug\net6.0\fib.deps.json
C:\Users\This User\Desktop\School Tehila\הנדסאים -מסלול\שנה ג\תרגול לשיפשוף\CliProject\CLIproject\bin\Debug\net6.0\fib.runtimeconfig.json
C:\Users\This User\Desktop\School Tehila\הנדסאים -מסלול\שנה ג\תרגול לשיפשוף\CliProject\CLIproject\bin\Debug\net6.0\fib.dll
C:\Users\This User\Desktop\School Tehila\הנדסאים -מסלול\שנה ג\תרגול לשיפשוף\CliProject\CLIproject\bin\Debug\net6.0\fib.pdb
C:\Users\This User\Desktop\School Tehila\הנדסאים -מסלול\שנה ג\תרגול לשיפשוף\CliProject\CLIproject\bin\Debug\net6.0\System.CommandLine.dll
C:\Users\This User\Desktop\School Tehila\הנדסאים -מסלול\שנה ג\תרגול לשיפשוף\CliProject\CLIproject\bin\Debug\net6.0\cs\System.CommandLine.resources.dll
C:\Users\This User\Desktop\School Tehila\הנדסאים -מסלול\שנה ג\תרגול לשיפשוף\CliProject\CLIproject\bin\Debug\net6.0\de\System.CommandLine.resources.dll
C:\Users\This User\Desktop\School Tehila\הנדסאים -מסלול\שנה ג\תרגול לשיפשוף\CliProject\CLIproject\bin\Debug\net6.0\es\System.CommandLine.resources.dll
C:\Users\This User\Desktop\School Tehila\הנדסאים -מסלול\שנה ג\תרגול לשיפשוף\CliProject\CLIproject\bin\Debug\net6.0\fr\System.CommandLine.resources.dll
C:\Users\This User\Desktop\School Tehila\הנדסאים -מסלול\שנה ג\תרגול לשיפשוף\CliProject\CLIproject\bin\Debug\net6.0\it\System.CommandLine.resources.dll
C:\Users\This User\Desktop\School Tehila\הנדסאים -מסלול\שנה ג\תרגול לשיפשוף\CliProject\CLIproject\bin\Debug\net6.0\ja\System.CommandLine.resources.dll
C:\Users\This User\Desktop\School Tehila\הנדסאים -מסלול\שנה ג\תרגול לשיפשוף\CliProject\CLIproject\bin\Debug\net6.0\ko\System.CommandLine.resources.dll
C:\Users\This User\Desktop\School Tehila\הנדסאים -מסלול\שנה ג\תרגול לשיפשוף\CliProject\CLIproject\bin\Debug\net6.0\pl\System.CommandLine.resources.dll
C:\Users\This User\Desktop\School Tehila\הנדסאים -מסלול\שנה ג\תרגול לשיפשוף\CliProject\CLIproject\bin\Debug\net6.0\pt-BR\System.CommandLine.resources.dll
C:\Users\This User\Desktop\School Tehila\הנדסאים -מסלול\שנה ג\תרגול לשיפשוף\CliProject\CLIproject\bin\Debug\net6.0\ru\System.CommandLine.resources.dll
C:\Users\This User\Desktop\School Tehila\הנדסאים -מסלול\שנה ג\תרגול לשיפשוף\CliProject\CLIproject\bin\Debug\net6.0\tr\System.CommandLine.resources.dll
C:\Users\This User\Desktop\School Tehila\הנדסאים -מסלול\שנה ג\תרגול לשיפשוף\CliProject\CLIproject\bin\Debug\net6.0\zh-Hans\System.CommandLine.resources.dll
C:\Users\This User\Desktop\School Tehila\הנדסאים -מסלול\שנה ג\תרגול לשיפשוף\CliProject\CLIproject\bin\Debug\net6.0\zh-Hant\System.CommandLine.resources.dll
C:\Users\This User\Desktop\School Tehila\הנדסאים -מסלול\שנה ג\תרגול לשיפשוף\CliProject\CLIproject\obj\Debug\net6.0\fib.csproj.AssemblyReference.cache
C:\Users\This User\Desktop\School Tehila\הנדסאים -מסלול\שנה ג\תרגול לשיפשוף\CliProject\CLIproject\obj\Debug\net6.0\fib.GeneratedMSBuildEditorConfig.editorconfig
C:\Users\This User\Desktop\School Tehila\הנדסאים -מסלול\שנה ג\תרגול לשיפשוף\CliProject\CLIproject\obj\Debug\net6.0\fib.AssemblyInfoInputs.cache
C:\Users\This User\Desktop\School Tehila\הנדסאים -מסלול\שנה ג\תרגול לשיפשוף\CliProject\CLIproject\obj\Debug\net6.0\fib.AssemblyInfo.cs
C:\Users\This User\Desktop\School Tehila\הנדסאים -מסלול\שנה ג\תרגול לשיפשוף\CliProject\CLIproject\obj\Debug\net6.0\fib.csproj.CoreCompileInputs.cache
C:\Users\This User\Desktop\School Tehila\הנדסאים -מסלול\שנה ג\תרגול לשיפשוף\CliProject\CLIproject\obj\Debug\net6.0\fib.sourcelink.json
C:\Users\This User\Desktop\School Tehila\הנדסאים -מסלול\שנה ג\תרגול לשיפשוף\CliProject\CLIproject\obj\Debug\net6.0\fib.csproj.CopyComplete
C:\Users\This User\Desktop\School Tehila\הנדסאים -מסלול\שנה ג\תרגול לשיפשוף\CliProject\CLIproject\obj\Debug\net6.0\fib.dll
C:\Users\This User\Desktop\School Tehila\הנדסאים -מסלול\שנה ג\תרגול לשיפשוף\CliProject\CLIproject\obj\Debug\net6.0\refint\fib.dll
C:\Users\This User\Desktop\School Tehila\הנדסאים -מסלול\שנה ג\תרגול לשיפשוף\CliProject\CLIproject\obj\Debug\net6.0\fib.pdb
C:\Users\This User\Desktop\School Tehila\הנדסאים -מסלול\שנה ג\תרגול לשיפשוף\CliProject\CLIproject\obj\Debug\net6.0\fib.genruntimeconfig.cache
C:\Users\This User\Desktop\School Tehila\הנדסאים -מסלול\שנה ג\תרגול לשיפשוף\CliProject\CLIproject\obj\Debug\net6.0\ref\fib.dll

// End of file: fib.csproj.FileListAbsolute.txt

// Start of file: fib.GlobalUsings.g.cs

// Relative path: CLIproject\obj\Debug\net6.0\fib.GlobalUsings.g.cs

// <auto-generated/>
global using global::System;
global using global::System.Collections.Generic;
global using global::System.IO;
global using global::System.Linq;
global using global::System.Net.Http;
global using global::System.Threading;
global using global::System.Threading.Tasks;

// End of file: fib.GlobalUsings.g.cs

// Start of file: fib.GlobalUsings.g.cs

// Relative path: CLIproject\obj\Release\net6.0\fib.GlobalUsings.g.cs

// <auto-generated/>
global using global::System;
global using global::System.Collections.Generic;
global using global::System.IO;
global using global::System.Linq;
global using global::System.Net.Http;
global using global::System.Threading;
global using global::System.Threading.Tasks;

// End of file: fib.GlobalUsings.g.cs

// Start of file: Program.cs

// Relative path: CLIproject\Program.cs

using System.CommandLine;
using System.IO;
using System.Linq;
using System.Text;
// הגדרת תיקיות שיש לדלג עליהן
var excludedDirectories = new[] { "bin", "debug", "obj" };
// הגדרת אפשרויות
var outputOption = new Option<FileInfo>("--output", "File path and name") { IsRequired = true };
outputOption.AddAlias("-o");
var languageOption = new Option<string>("--language", "List of programming languages (e.g., C#, Java, Python, etc.)") { IsRequired = true };
languageOption.AddAlias("-l");
var noteOption = new Option<bool>("--note", "Add source file information as comments.");
noteOption.AddAlias("-n");
var sortOption = new Option<string>("--sort", () => "name", "Sort by file name or type.");
sortOption.AddAlias("-s");
var removeEmptyLinesOption = new Option<bool>("--remove-empty-lines", "Remove empty lines.");
removeEmptyLinesOption.AddAlias("-r");
var authorOption = new Option<string>("--author", "Author name to add as a comment.");
authorOption.AddAlias("-a");
// הגדרת פקודה
var bundleCommand = new Command("bundle", "Bundle code files to a single file.")
{
    outputOption,
    languageOption,
    noteOption,
    sortOption,
    removeEmptyLinesOption,
    authorOption
};
// מימוש הלוגיקה של עיבוד הפקודה
bundleCommand.SetHandler<FileInfo, string, bool, string, bool, string>(
    (output, language, note, sort, removeEmptyLines, author) =>
    {
        try
        {
            // רשימת שפות נתמכות
            var supportedLanguages = new[] { "cs", "c", "cpp", "js", "jsx", "py", "java", "txt" };
            // פענוח שפות מהאפשרות
            var selectedLanguages = language.Equals("all", StringComparison.OrdinalIgnoreCase)
                ? supportedLanguages
                : language.Split(',', StringSplitOptions.RemoveEmptyEntries)
                          .Select(lang => lang.Trim().ToLower())
                          .Where(lang => supportedLanguages.Contains(lang))
                          .ToArray();
            if (!selectedLanguages.Any())
            {
                Console.WriteLine("No valid languages selected. Supported languages are: " + string.Join(", ", supportedLanguages));
                return;
            }
            // איתור כל הקבצים בתיקייה הנוכחית שעונים לקריטריונים
            var files = Directory.GetFiles(Directory.GetCurrentDirectory(), "*.*", SearchOption.AllDirectories)
                .Where(file =>
                {
                    var relativePath = Path.GetRelativePath(Directory.GetCurrentDirectory(), file);
                    var directoryName = Path.GetDirectoryName(relativePath)?.Split(Path.DirectorySeparatorChar).FirstOrDefault();
                    return selectedLanguages.Contains(Path.GetExtension(file).TrimStart('.').ToLower()) &&
                           !excludedDirectories.Contains(directoryName?.ToLower());
                })
                .ToList();
            if (!files.Any())
            {
                Console.WriteLine("No files found matching the selected languages and criteria.");
                return;
            }
            // מיון קבצים
            files = sort switch
            {
                "name" => files.OrderBy(Path.GetFileName).ToList(),
                "type" => files.OrderBy(Path.GetExtension).ThenBy(Path.GetFileName).ToList(),
                _ => files
            };
            // יצירת קובץ הפלט ואיחוד הקבצים לתוכו
            using var writer = new StreamWriter(output.FullName, false, Encoding.UTF8);
            if (!string.IsNullOrWhiteSpace(author))
            {
                writer.WriteLine($"// Author: {author}");
                writer.WriteLine();
            }
            foreach (var file in files)
            {
                var fileName = Path.GetFileName(file);
                // הוספת הערה עם שם הקובץ לפני התוכן
                writer.WriteLine($"// Start of file: {fileName}");
                writer.WriteLine();
                if (note)
                {
                    var relativePath = Path.GetRelativePath(Directory.GetCurrentDirectory(), file);
                    writer.WriteLine($"// Relative path: {relativePath}");
                    writer.WriteLine();
                }
                var lines = File.ReadAllLines(file);
                if (removeEmptyLines)
                {
                    lines = lines.Where(line => !string.IsNullOrWhiteSpace(line)).ToArray();
                }
                foreach (var line in lines)
                {
                    writer.WriteLine(line);
                }
                // הוספת הערה עם שם הקובץ אחרי התוכן
                writer.WriteLine();
                writer.WriteLine($"// End of file: {fileName}");
                writer.WriteLine(); // הוספת שורה ריקה בין קבצים
            }
            Console.WriteLine($"Bundle created successfully at {output.FullName}");
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error: {ex.Message}");
        }
    },
    outputOption, languageOption, noteOption, sortOption, removeEmptyLinesOption, authorOption
);
var createRspCommand = new Command("create-rsp", "Create a response file for the bundle command.");
createRspCommand.SetHandler(() =>
{
    try {
        Console.Write("Enter output file path and name (e.g., output.txt): ");
        var output = Console.ReadLine() ?? string.Empty;
        Console.Write("Enter programming languages (comma-separated, or 'all'): ");
        var languages = Console.ReadLine() ?? string.Empty;
        Console.Write("Include source file information as comments? (yes/no): ");
        var includeNotes = Console.ReadLine()?.Trim().ToLower() == "yes";
        Console.Write("Sort files by 'name' or 'type' (default: name): ");
        var sort = Console.ReadLine();
        if (string.IsNullOrWhiteSpace(sort)) sort = "name";
        Console.Write("Remove empty lines? (yes/no): ");
        var removeEmptyLines = Console.ReadLine()?.Trim().ToLower() == "yes";
        Console.Write("Enter author name (optional): ");
        var author = Console.ReadLine();
        // יצירת תוכן קובץ התגובה
        var responseFileContent = new StringBuilder();
        responseFileContent.AppendLine($"--output {output}");
        responseFileContent.AppendLine($"--language {languages}");
        if (includeNotes) responseFileContent.AppendLine("--note");
        responseFileContent.AppendLine($"--sort {sort}");
        if (removeEmptyLines) responseFileContent.AppendLine("--remove-empty-lines");
        if (!string.IsNullOrWhiteSpace(author)) responseFileContent.AppendLine($"--author \"{author}\"");
        // שמירת קובץ התגובה
        var responseFileName = "bundle.rsp";
        File.WriteAllText(responseFileName, responseFileContent.ToString());
        Console.WriteLine($"Response file created: {responseFileName}");
        Console.WriteLine($"To use it, run: fib bundle @bundle.rsp");
    }
    catch (Exception ex)
    {
        Console.WriteLine($"Error: {ex.Message}");
    }
});
// הגדרת RootCommand
var rootCommand = new RootCommand("Root command for File Bundler CLI");
rootCommand.AddCommand(bundleCommand);
rootCommand.AddCommand(createRspCommand);
// הפעלת RootCommand
await rootCommand.InvokeAsync(args);

// End of file: Program.cs

// Start of file: PublishOutputs.3cabc9d4a6.txt

// Relative path: CLIproject\obj\Debug\net6.0\PublishOutputs.3cabc9d4a6.txt

C:\Users\user1\Desktop\practicode\CLIproject\publish\fib.exe
C:\Users\user1\Desktop\practicode\CLIproject\publish\fib.dll
C:\Users\user1\Desktop\practicode\CLIproject\publish\fib.deps.json
C:\Users\user1\Desktop\practicode\CLIproject\publish\fib.runtimeconfig.json
C:\Users\user1\Desktop\practicode\CLIproject\publish\fib.pdb
C:\Users\user1\Desktop\practicode\CLIproject\publish\System.CommandLine.dll
C:\Users\user1\Desktop\practicode\CLIproject\publish\cs\System.CommandLine.resources.dll
C:\Users\user1\Desktop\practicode\CLIproject\publish\de\System.CommandLine.resources.dll
C:\Users\user1\Desktop\practicode\CLIproject\publish\es\System.CommandLine.resources.dll
C:\Users\user1\Desktop\practicode\CLIproject\publish\fr\System.CommandLine.resources.dll
C:\Users\user1\Desktop\practicode\CLIproject\publish\it\System.CommandLine.resources.dll
C:\Users\user1\Desktop\practicode\CLIproject\publish\ja\System.CommandLine.resources.dll
C:\Users\user1\Desktop\practicode\CLIproject\publish\ko\System.CommandLine.resources.dll
C:\Users\user1\Desktop\practicode\CLIproject\publish\pl\System.CommandLine.resources.dll
C:\Users\user1\Desktop\practicode\CLIproject\publish\pt-BR\System.CommandLine.resources.dll
C:\Users\user1\Desktop\practicode\CLIproject\publish\ru\System.CommandLine.resources.dll
C:\Users\user1\Desktop\practicode\CLIproject\publish\tr\System.CommandLine.resources.dll
C:\Users\user1\Desktop\practicode\CLIproject\publish\zh-Hans\System.CommandLine.resources.dll
C:\Users\user1\Desktop\practicode\CLIproject\publish\zh-Hant\System.CommandLine.resources.dll

// End of file: PublishOutputs.3cabc9d4a6.txt

// Start of file: PublishOutputs.8b197e12d7.txt

// Relative path: CLIproject\obj\Debug\net6.0\PublishOutputs.8b197e12d7.txt

C:\Users\user1\Desktop\פרקטיקוד\CLIproject\publish\fib.exe
C:\Users\user1\Desktop\פרקטיקוד\CLIproject\publish\fib.dll
C:\Users\user1\Desktop\פרקטיקוד\CLIproject\publish\fib.deps.json
C:\Users\user1\Desktop\פרקטיקוד\CLIproject\publish\fib.runtimeconfig.json
C:\Users\user1\Desktop\פרקטיקוד\CLIproject\publish\fib.pdb
C:\Users\user1\Desktop\פרקטיקוד\CLIproject\publish\System.CommandLine.dll
C:\Users\user1\Desktop\פרקטיקוד\CLIproject\publish\cs\System.CommandLine.resources.dll
C:\Users\user1\Desktop\פרקטיקוד\CLIproject\publish\de\System.CommandLine.resources.dll
C:\Users\user1\Desktop\פרקטיקוד\CLIproject\publish\es\System.CommandLine.resources.dll
C:\Users\user1\Desktop\פרקטיקוד\CLIproject\publish\fr\System.CommandLine.resources.dll
C:\Users\user1\Desktop\פרקטיקוד\CLIproject\publish\it\System.CommandLine.resources.dll
C:\Users\user1\Desktop\פרקטיקוד\CLIproject\publish\ja\System.CommandLine.resources.dll
C:\Users\user1\Desktop\פרקטיקוד\CLIproject\publish\ko\System.CommandLine.resources.dll
C:\Users\user1\Desktop\פרקטיקוד\CLIproject\publish\pl\System.CommandLine.resources.dll
C:\Users\user1\Desktop\פרקטיקוד\CLIproject\publish\pt-BR\System.CommandLine.resources.dll
C:\Users\user1\Desktop\פרקטיקוד\CLIproject\publish\ru\System.CommandLine.resources.dll
C:\Users\user1\Desktop\פרקטיקוד\CLIproject\publish\tr\System.CommandLine.resources.dll
C:\Users\user1\Desktop\פרקטיקוד\CLIproject\publish\zh-Hans\System.CommandLine.resources.dll
C:\Users\user1\Desktop\פרקטיקוד\CLIproject\publish\zh-Hant\System.CommandLine.resources.dll

// End of file: PublishOutputs.8b197e12d7.txt

// Start of file: PublishOutputs.dc16ab2fd0.txt

// Relative path: CLIproject\obj\Debug\net6.0\PublishOutputs.dc16ab2fd0.txt

C:\Users\This User\Desktop\School Tehila\הנדסאים -מסלול\שנה ג\תרגול לשיפשוף\CliProject\publish\fib.exe
C:\Users\This User\Desktop\School Tehila\הנדסאים -מסלול\שנה ג\תרגול לשיפשוף\CliProject\publish\fib.dll
C:\Users\This User\Desktop\School Tehila\הנדסאים -מסלול\שנה ג\תרגול לשיפשוף\CliProject\publish\fib.deps.json
C:\Users\This User\Desktop\School Tehila\הנדסאים -מסלול\שנה ג\תרגול לשיפשוף\CliProject\publish\fib.runtimeconfig.json
C:\Users\This User\Desktop\School Tehila\הנדסאים -מסלול\שנה ג\תרגול לשיפשוף\CliProject\publish\fib.pdb
C:\Users\This User\Desktop\School Tehila\הנדסאים -מסלול\שנה ג\תרגול לשיפשוף\CliProject\publish\System.CommandLine.dll
C:\Users\This User\Desktop\School Tehila\הנדסאים -מסלול\שנה ג\תרגול לשיפשוף\CliProject\publish\cs\System.CommandLine.resources.dll
C:\Users\This User\Desktop\School Tehila\הנדסאים -מסלול\שנה ג\תרגול לשיפשוף\CliProject\publish\de\System.CommandLine.resources.dll
C:\Users\This User\Desktop\School Tehila\הנדסאים -מסלול\שנה ג\תרגול לשיפשוף\CliProject\publish\es\System.CommandLine.resources.dll
C:\Users\This User\Desktop\School Tehila\הנדסאים -מסלול\שנה ג\תרגול לשיפשוף\CliProject\publish\fr\System.CommandLine.resources.dll
C:\Users\This User\Desktop\School Tehila\הנדסאים -מסלול\שנה ג\תרגול לשיפשוף\CliProject\publish\it\System.CommandLine.resources.dll
C:\Users\This User\Desktop\School Tehila\הנדסאים -מסלול\שנה ג\תרגול לשיפשוף\CliProject\publish\ja\System.CommandLine.resources.dll
C:\Users\This User\Desktop\School Tehila\הנדסאים -מסלול\שנה ג\תרגול לשיפשוף\CliProject\publish\ko\System.CommandLine.resources.dll
C:\Users\This User\Desktop\School Tehila\הנדסאים -מסלול\שנה ג\תרגול לשיפשוף\CliProject\publish\pl\System.CommandLine.resources.dll
C:\Users\This User\Desktop\School Tehila\הנדסאים -מסלול\שנה ג\תרגול לשיפשוף\CliProject\publish\pt-BR\System.CommandLine.resources.dll
C:\Users\This User\Desktop\School Tehila\הנדסאים -מסלול\שנה ג\תרגול לשיפשוף\CliProject\publish\ru\System.CommandLine.resources.dll
C:\Users\This User\Desktop\School Tehila\הנדסאים -מסלול\שנה ג\תרגול לשיפשוף\CliProject\publish\tr\System.CommandLine.resources.dll
C:\Users\This User\Desktop\School Tehila\הנדסאים -מסלול\שנה ג\תרגול לשיפשוף\CliProject\publish\zh-Hans\System.CommandLine.resources.dll
C:\Users\This User\Desktop\School Tehila\הנדסאים -מסלול\שנה ג\תרגול לשיפשוף\CliProject\publish\zh-Hant\System.CommandLine.resources.dll

// End of file: PublishOutputs.dc16ab2fd0.txt

